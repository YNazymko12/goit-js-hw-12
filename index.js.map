{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst PIXABAY_API_KEY = '40905423-24d24966a8b04fca12252a818';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchImages = (searchedQuery, currentPage, perPage) => {\n  const axiosOptions = {\n    params: {\n      key: PIXABAY_API_KEY,\n      q: searchedQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: perPage,\n    },\n  };\n\n  return axios.get('', axiosOptions);\n};\n","export const createGalleryCard = ({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) => {\n  return `\n        <li class='gallery-card'>\n            <a href=\"${largeImageURL}\">\n                <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags} loading='lazy\" />\n            </a>\n            <div class=\"gallery-info\">\n                <p class=\"gallery-info-item\">\n                    <b>Likes</b>${likes}\n                </p>\n                    <p class=\"gallery-info-item\">\n                <b>Views</b>${views}\n                </p>\n                <p class=\"gallery-info-item\">\n                    <b>Comments</b>${comments}\n                </p>\n                <p class=\"gallery-info-item\">\n                    <b>Downloads</b>${downloads}\n                </p>\n            </div>\n          </li>`;\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { createGalleryCard } from './js/render-functions';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\n\nlet currentPage = 1;\nconst perPage = 15;\nlet searchedValue = '';\n\nlet lightbox = new SimpleLightbox('.js-gallery a');\n\nconst toggleLoader = () => {\n  loaderEl.classList.toggle('is-hidden');\n};\n\nconst hideLoadMoreBtn = () => {\n  loadMoreBtnEl.classList.add('is-hidden');\n};\n\nconst showLoadMoreBtn = () => {\n  loadMoreBtnEl.classList.remove('is-hidden');\n};\n\nconst showError = message => {\n  iziToast.error({\n    message: message,\n    position: 'topRight',\n    maxWidth: 400,\n  });\n};\n\nconst smoothScrollByHeight = () => {\n  const galleryCard = document.querySelector('.js-gallery .gallery-card');\n  if (galleryCard) {\n    const cardHeight = galleryCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n};\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n    searchedValue = searchFormEl.elements.user_query.value.trim();\n    if (searchedValue === '') {\n      return;\n    }\n    galleryEl.innerHTML = '';\n    hideLoadMoreBtn();\n    toggleLoader();\n    currentPage = 1;\n\n    const response = await fetchImages(searchedValue, currentPage, perPage);\n\n    if (response.data.hits.length === 0) {\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    const galleryMarkup = response.data.hits\n      .map(imgDetails => createGalleryCard(imgDetails))\n      .join('');\n\n    galleryEl.innerHTML = galleryMarkup;\n\n    if (response.data.totalHits > 15) {\n      showLoadMoreBtn();\n    }\n\n    lightbox.refresh();\n    searchFormEl.reset();\n  } catch (error) {\n    console.log(error);\n    showError(`${error}`);\n  } finally {\n    toggleLoader();\n  }\n};\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    currentPage += 1;\n    hideLoadMoreBtn();\n    toggleLoader();\n\n    const response = await fetchImages(searchedValue, currentPage, perPage);\n\n    const galleryMarkup = response.data.hits\n      .map(imgDetails => createGalleryCard(imgDetails))\n      .join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryMarkup);\n\n    smoothScrollByHeight();\n    lightbox.refresh();\n\n    const totalPages = Math.ceil(response.data.totalHits / perPage);\n    if (currentPage < totalPages) {\n      showLoadMoreBtn();\n    } else {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        maxWidth: 400,\n      });\n    }\n  } catch (error) {\n    console.log(error);\n    showError(`${error}`);\n  } finally {\n    toggleLoader();\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["PIXABAY_API_KEY","axios","fetchImages","searchedQuery","currentPage","perPage","axiosOptions","createGalleryCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchFormEl","galleryEl","loaderEl","loadMoreBtnEl","searchedValue","lightbox","SimpleLightbox","toggleLoader","hideLoadMoreBtn","showLoadMoreBtn","showError","message","iziToast","smoothScrollByHeight","galleryCard","cardHeight","onSearchFormSubmit","event","response","galleryMarkup","imgDetails","error","onLoadMoreBtnClick","totalPages"],"mappings":"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"}